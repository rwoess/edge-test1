"use strict";(self.webpackChunklot_com=self.webpackChunklot_com||[]).push([[12520],{12520:(Q,c,t)=>{t.r(c),t.d(c,{ManageMyBookingInternalComponent:()=>D,ManageMyBookingInternalEditConfig:()=>U});var m=t(36895),r=t(24006),g=t(58970),p=t(77579),M=t(82722),n=t(94650),u=t(58061),f=t(55213),h=t(4859),s=t(59549),x=t(44144),b=t(12687),k=t(47499),C=t(7863),O=t(63924),P=t(44553),y=t(89650);function B(o,a){if(1&o&&n._UZ(0,"lot-title",10),2&o){const e=n.oxw(2);n.Tol(e.alignmentClass),n.Q6J("headingTag",e.header.headerClass)("headingClass",e.header.headerStyling)("label",e.header.text)("align",e.align)}}function I(o,a){if(1&o&&(n.TgZ(0,"p"),n._uU(1),n.qZA()),2&o){const e=n.oxw(2);n.xp6(1),n.Oqu(e.header.description)}}function v(o,a){if(1&o&&(n.ynx(0),n.TgZ(1,"p"),n._uU(2),n.qZA(),n.BQk()),2&o){const e=n.oxw(2);n.xp6(2),n.Oqu(e.errors.onlyAlphanumeric)}}function E(o,a){if(1&o&&(n.ynx(0),n.TgZ(1,"p"),n._uU(2),n.qZA(),n.BQk()),2&o){const e=n.oxw(2);n.xp6(2),n.Oqu(e.errors.invalidNumberOfCharacters)}}function T(o,a){if(1&o&&(n.ynx(0),n.TgZ(1,"p"),n._uU(2),n.qZA(),n.BQk()),2&o){const e=n.oxw(2);n.xp6(2),n.Oqu(e.errors.requiredField)}}function F(o,a){if(1&o&&(n.ynx(0),n.TgZ(1,"p"),n._uU(2),n.qZA(),n.BQk()),2&o){const e=n.oxw(2);n.xp6(2),n.Oqu(e.errors.requiredField)}}function R(o,a){if(1&o&&(n.ynx(0),n.TgZ(1,"p"),n._uU(2),n.qZA(),n.BQk()),2&o){const e=n.oxw(2);n.xp6(2),n.Oqu(e.errors.onlyLetters)}}const d=function(o,a){return{"manage-my-booking__form-field--outside-of-booker":o,"white-border":a}},A=function(o){return{"manage-my-booking__button--outside-of-booker":o}};function L(o,a){if(1&o){const e=n.EpF();n.ynx(0),n.TgZ(1,"div")(2,"h2",1),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.YNc(5,B,1,7,"lot-title",2),n.YNc(6,I,2,1,"p",0),n.qZA(),n.TgZ(7,"form",3),n.NdJ("ngSubmit",function(){n.CHM(e);const l=n.oxw();return n.KtG(l.onMMBSubmit())}),n.TgZ(8,"mat-form-field",4),n._UZ(9,"input",5),n.TgZ(10,"mat-label"),n._uU(11),n.qZA(),n.TgZ(12,"mat-error"),n.YNc(13,v,3,1,"ng-container",0),n.YNc(14,E,3,1,"ng-container",0),n.YNc(15,T,3,1,"ng-container",0),n.qZA()(),n.TgZ(16,"mat-form-field",4),n._UZ(17,"input",6),n.TgZ(18,"mat-label"),n._uU(19),n.qZA(),n.TgZ(20,"mat-error"),n.YNc(21,F,3,1,"ng-container",0),n.YNc(22,R,3,1,"ng-container",0),n.qZA()(),n.TgZ(23,"button",7),n._uU(24),n.TgZ(25,"span",8),n._uU(26),n.qZA()(),n.TgZ(27,"span",9),n._uU(28),n.ALo(29,"translate"),n.qZA()(),n.BQk()}if(2&o){const e=n.oxw();n.xp6(1),n.Gre("manage-my-booking__header ",e.alignmentClass,""),n.xp6(2),n.hij(" ",n.lcZ(4,22,"Manage my booking")," "),n.xp6(2),n.Q6J("ngIf",e.header&&e.header.text&&!e.componentInBooker),n.xp6(1),n.Q6J("ngIf",e.header&&e.header.description),n.xp6(1),n.Q6J("formGroup",e.MMBForm),n.xp6(1),n.Q6J("ngClass",n.WLB(26,d,!e.componentInBooker,e.componentInBooker)),n.xp6(1),n.Q6J("placeholder",e.bookingReference.placeholder),n.xp6(2),n.Oqu(e.bookingReference.label),n.xp6(2),n.Q6J("ngIf",null==e.MMBForm.controls.bookingReferenceField.errors?null:e.MMBForm.controls.bookingReferenceField.errors.pattern),n.xp6(1),n.Q6J("ngIf",!(null!=e.MMBForm.controls.bookingReferenceField.errors&&e.MMBForm.controls.bookingReferenceField.errors.pattern)&&((null==e.MMBForm.controls.bookingReferenceField.errors?null:e.MMBForm.controls.bookingReferenceField.errors.maxlength)||(null==e.MMBForm.controls.bookingReferenceField.errors?null:e.MMBForm.controls.bookingReferenceField.errors.minlength))),n.xp6(1),n.Q6J("ngIf",null==e.MMBForm.controls.bookingReferenceField.errors?null:e.MMBForm.controls.bookingReferenceField.errors.required),n.xp6(1),n.Q6J("ngClass",n.WLB(29,d,!e.componentInBooker,e.componentInBooker)),n.xp6(1),n.Q6J("placeholder",e.lastName.placeholder),n.xp6(2),n.Oqu(e.lastName.label),n.xp6(2),n.Q6J("ngIf",null==e.MMBForm.controls.lastNameField.errors?null:e.MMBForm.controls.lastNameField.errors.required),n.xp6(1),n.Q6J("ngIf",null==e.MMBForm.controls.lastNameField.errors?null:e.MMBForm.controls.lastNameField.errors.pattern),n.xp6(1),n.Q6J("ngClass",n.VKq(32,A,!e.componentInBooker)),n.xp6(1),n.hij(" ",e.link.label," "),n.xp6(2),n.Oqu(e.link.screenReaderDescription),n.xp6(2),n.Oqu(n.lcZ(29,24,"* required fields"))}}const U={label:"Manage my booking internal",isEmpty:()=>!1};let D=(()=>{class o{constructor(e,i,l,_,Z,S,N,w){this.document=e,this.formBuilder=i,this.visibilityService=l,this.MMBSearchParamsUpdateService=_,this.ibeFlowIdService=Z,this.router=S,this.modelManagerService=N,this.mmbService=w,this.destroy$=new p.x,this.MMBForm=this.createMmbForm(),this.listenToClearFormRequest()}onMMBSubmit(){if(!this.MMBForm.valid)return;const e=JSON.stringify(this.MMBForm.value);sessionStorage.setItem(g.cf6.MMB_PARAMS,e),this.MMBSearchParamsUpdateService.updateMMBSearchParams(),this.mmbService.clearOrder(),this.ibeFlowIdService.resetIbeFlowId(),this.router.navigate([this.modelManagerService.rootPath,g.bRW],{replaceUrl:!0})}shouldRender(){return this.visibilityService.shouldRenderAmadeus()}listenToClearFormRequest(){this.MMBSearchParamsUpdateService.clearMmbForm$.pipe((0,M.R)(this.destroy$)).subscribe(()=>{this.formRef?.resetForm()})}createMmbForm(){return this.formBuilder.group({bookingReferenceField:["",{validators:[r.kI.required,r.kI.pattern(g.Sfs.ONLY_ALPHANUMERIC),r.kI.minLength(6),r.kI.maxLength(6)]}],lastNameField:["",{validators:[r.kI.required,r.kI.pattern(g.Sfs.ONLY_LETTERS)]}]})}ngOnDestroy(){this.destroy$.next()}get alignmentClass(){return"manage-my-booking__header--"+this.header?.contentAlignment}get align(){return"centered"===this.header?.contentAlignment?"center":this.header?.contentAlignment||"left"}static#n=this.\u0275fac=function(i){return new(i||o)(n.Y36(m.K0),n.Y36(r.qu),n.Y36(u.P),n.Y36(g.bmN),n.Y36(g.Ugx),n.Y36(f.F0),n.Y36(g.viK),n.Y36(g.KI8))};static#e=this.\u0275cmp=n.Xpm({type:o,selectors:[["lot-manage-my-booking-internal"]],viewQuery:function(i,l){if(1&i&&n.Gf(r.sg,5),2&i){let _;n.iGM(_=n.CRH())&&(l.formRef=_.first)}},hostVars:1,hostBindings:function(i,l){2&i&&n.Ikx("id",l.id)},inputs:{header:"header",bookingReference:"bookingReference",lastName:"lastName",link:"link",errors:"errors",componentInBooker:"componentInBooker",id:"id"},decls:1,vars:1,consts:[[4,"ngIf"],["id","manage-my-booking",1,"cdk-visually-hidden"],[3,"class","headingTag","headingClass","label","align",4,"ngIf"],["lotFocusInvalidControl","",1,"manage-my-booking",3,"formGroup","ngSubmit"],[1,"manage-my-booking__form-field",3,"ngClass"],["formControlName","bookingReferenceField","maxlength","6","spellcheck","false","lotTrimControlSpaces","","matInput","","required","",3,"placeholder"],["formControlName","lastNameField","spellcheck","false","autocomplete","family-name","lotTrimControlSpaces","","matInput","","required","",3,"placeholder"],["mat-raised-button","","cdkMonitorElementFocus","","type","submit",1,"manage-my-booking__button","mat-primary-accent",3,"ngClass"],[1,"cdk-visually-hidden"],["aria-hidden","true",1,"cdk-visually-hidden"],[3,"headingTag","headingClass","label","align"]],template:function(i,l){1&i&&n.YNc(0,L,30,34,"ng-container",0),2&i&&n.Q6J("ngIf",l.shouldRender())},dependencies:[m.mk,m.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.nD,r.sg,r.u,h.lW,s.KE,s.hX,s.TO,x.Nt,b.kH,k.u,C.k,O.X,P.r,y.X$],styles:["[_nghost-%COMP%]:not(:empty){display:block;padding-top:36px;padding-bottom:21px;margin-left:calc(var(--grid-gutter-width) / 2);margin-right:calc(var(--grid-gutter-width) / 2)}.manage-my-booking[_ngcontent-%COMP%]{align-items:flex-start;justify-content:flex-end;display:inline-flex;flex-wrap:wrap;margin:-12px 0 0 -12px;width:calc(100% + 12px)}.manage-my-booking[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:12px 0 0 12px}.manage-my-booking__header[_ngcontent-%COMP%]   lot-title[_ngcontent-%COMP%]{margin-left:0}.manage-my-booking__header--left[_ngcontent-%COMP%]{text-align:left}.manage-my-booking__header--centered[_ngcontent-%COMP%]{text-align:center}.manage-my-booking__header--right[_ngcontent-%COMP%]{text-align:right;margin-right:0}.manage-my-booking__form-field[_ngcontent-%COMP%]{flex-grow:1;min-width:250px}.manage-my-booking__form-field.mat-form-field-invalid[_ngcontent-%COMP%]{margin-bottom:1.25rem}@media (min-width: 1024px){.manage-my-booking__form-field.mat-form-field-invalid[_ngcontent-%COMP%]{margin-bottom:1.625rem}}.manage-my-booking__form-field--outside-of-booker[_ngcontent-%COMP%]{width:100%!important}@media (min-width: 1024px){.manage-my-booking__form-field--outside-of-booker[_ngcontent-%COMP%]{width:30%!important}}.manage-my-booking__button[_ngcontent-%COMP%]{min-width:112px;height:60px;font: 400 18px/18px LotGeomanist,LotLato,Helvetica,Arial,sans-serif}.manage-my-booking__button--outside-of-booker[_ngcontent-%COMP%]{flex-grow:1;min-width:210px;font: 400 18px/18px LotGeomanist,LotLato,Helvetica,Arial,sans-serif}@media (min-width: 1024px){.manage-my-booking__button--outside-of-booker[_ngcontent-%COMP%]{font: 400 12px/12px LotGeomanist,LotLato,Helvetica,Arial,sans-serif;height:60px!important;margin-bottom:40px!important}}@media (min-width: 768px){.manage-my-booking__button[_ngcontent-%COMP%]{border:none;height:60px}}.group-booking[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px}@media (min-width: 1024px){.group-booking[_ngcontent-%COMP%]{padding:32px 48px 20px}}.group-booking[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font: 400 14px/18px LotGeomanist,LotLato,Helvetica,Arial,sans-serif;color:#343740;margin-bottom:16px}.group-booking__form[_ngcontent-%COMP%]{width:100%}.group-booking__form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:24px}.group-booking__form--with-notification[_ngcontent-%COMP%]{margin-bottom:16px!important}.group-booking__btns[_ngcontent-%COMP%]{display:flex;border-top:1px solid #d4d6dc;padding:20px 20px 0;margin:0 -20px}.group-booking__btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:10px}.group-booking__btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}@media (min-width: 1024px){.group-booking__btns[_ngcontent-%COMP%]{justify-content:flex-end;padding-top:0;border-top:none}.group-booking__btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:8px}.group-booking__btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:unset}}"]})}return o})()}}]);
"use strict";(self.webpackChunklot_com=self.webpackChunklot_com||[]).push([[46927],{46927:(X,d,c)=>{c.r(d),c.d(d,{CheckInComponent:()=>W,CheckInEditConfig:()=>j});var p=c(36895),l=c(24006),a=c(58970),e=c(94650),x=c(80529);let N=(()=>{class t{constructor(n,r,o){this.http=n,this.modelManager=r,this.config=o,this.language="",this.market="",this.modelManager.getData().then(s=>{this.language=s.configuration.locale.slice(0,2),this.market=s.configuration.market.market.toUpperCase()||""})}cleanTicketNumber(n){return n.replace("-","")}makeRequest(n){const r={language:this.language,formOfIdentification:n.bookingReference?"PNR":"ETKT",identification:n.bookingReference?n.bookingReference:this.cleanTicketNumber(n.ticketNumber),surname:n.lastName};return this.http.post(this.config.apis.checkin,r)}static#e=this.\u0275fac=function(r){return new(r||t)(e.LFG(x.eN),e.LFG(a.viK),e.LFG(a.E4y))};static#n=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var _=c(12687),k=c(89650);let I=(()=>{class t{constructor(n,r){this.liveAnnouncer=n,this.translateService=r}announceIntervalStart(n,r){const o=this.translateService.instant(n);return this.liveAnnouncer.announce(o,r),setInterval(()=>{this.liveAnnouncer.announce(o,r)},r)}announceIntervalStop(n){this.liveAnnouncer.clear(),n&&clearInterval(n)}static#e=this.\u0275fac=function(r){return new(r||t)(e.LFG(_.Kd),e.LFG(k.sK))};static#n=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var b=c(4859),u=c(59549),v=c(44144),T=c(26294),Z=c(47499),F=c(7863),O=c(63924),y=c(7723),w=c(13785),S=c(46829),M=c(44553);function A(t,i){if(1&t&&e._UZ(0,"lot-title",20),2&t){const n=e.oxw();e.Q6J("headingTag",n.header.headerElement)("headingClass",n.header.headerStyling)("label",n.header.text)}}function q(t,i){if(1&t&&(e.TgZ(0,"div",21),e._UZ(1,"aem-lot-text",22),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("richText",!0)("text",n.header.description)}}function Q(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(2),e.Oqu(n.errors.onlyAlphanumeric)}}function J(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(2),e.Oqu(n.errors.lengthNot6)}}function P(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(2),e.Oqu(n.errors.requiredField)}}const f=function(t,i){return{"check-in__form-field--outside-of-booker":t,"white-border":i}};function R(t,i){if(1&t&&(e.TgZ(0,"mat-form-field",23),e._UZ(1,"input",24),e.TgZ(2,"mat-label"),e._uU(3),e.qZA(),e.TgZ(4,"mat-error"),e.YNc(5,Q,3,1,"ng-container",15),e.YNc(6,J,3,1,"ng-container",15),e.YNc(7,P,3,1,"ng-container",15),e.qZA()()),2&t){const n=e.oxw();e.Q6J("ngClass",e.WLB(6,f,!n.componentInBooker,n.componentInBooker)),e.xp6(1),e.Q6J("placeholder",n.bookingReference.placeholder),e.xp6(2),e.Oqu(n.bookingReference.label),e.xp6(2),e.Q6J("ngIf",null==n.CINForm.controls.bookingReference.errors?null:n.CINForm.controls.bookingReference.errors.pattern),e.xp6(1),e.Q6J("ngIf",!(null!=n.CINForm.controls.bookingReference.errors&&n.CINForm.controls.bookingReference.errors.pattern)&&((null==n.CINForm.controls.bookingReference.errors?null:n.CINForm.controls.bookingReference.errors.maxlength)||(null==n.CINForm.controls.bookingReference.errors?null:n.CINForm.controls.bookingReference.errors.minlength))),e.xp6(1),e.Q6J("ngIf",null==n.CINForm.controls.bookingReference.errors?null:n.CINForm.controls.bookingReference.errors.required)}}function B(t,i){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.Oqu(n.errors.requiredField)}}function L(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(2),e.Oqu(n.errors.onlyDigits)}}function U(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(2),e.Oqu(n.errors.lengthNot13)}}function Y(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(2),e.Oqu(n.errors.invalidTicketNumberStart)}}function E(t,i){if(1&t&&(e.TgZ(0,"mat-form-field",13),e._UZ(1,"input",25),e.TgZ(2,"mat-label"),e._uU(3),e.qZA(),e.TgZ(4,"mat-error"),e.YNc(5,B,2,1,"ng-container",15),e.YNc(6,L,3,1,"ng-container",15),e.YNc(7,U,3,1,"ng-container",15),e.YNc(8,Y,3,1,"ng-container",15),e.qZA()()),2&t){const n=e.oxw();e.Q6J("ngClass",e.WLB(7,f,!n.componentInBooker,n.componentInBooker)),e.xp6(1),e.Q6J("placeholder",n.ticketNumber.placeholder),e.xp6(2),e.Oqu(n.ticketNumber.label),e.xp6(2),e.Q6J("ngIf",null==n.CINForm.controls.ticketNumber.errors?null:n.CINForm.controls.ticketNumber.errors.required),e.xp6(1),e.Q6J("ngIf",(null==n.CINForm.controls.ticketNumber.errors?null:n.CINForm.controls.ticketNumber.errors.onlyDigits)&&!(null!=n.CINForm.controls.ticketNumber.errors&&n.CINForm.controls.ticketNumber.errors.required)),e.xp6(1),e.Q6J("ngIf",!(!0!==(null==n.CINForm.controls.ticketNumber.errors?null:n.CINForm.controls.ticketNumber.errors.tooShort)&&!0!==(null==n.CINForm.controls.ticketNumber.errors?null:n.CINForm.controls.ticketNumber.errors.tooLong)||null!=n.CINForm.controls.ticketNumber.errors&&n.CINForm.controls.ticketNumber.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==n.CINForm.controls.ticketNumber.errors?null:n.CINForm.controls.ticketNumber.errors.invalidFormat)&&!(null!=n.CINForm.controls.ticketNumber.errors&&n.CINForm.controls.ticketNumber.errors.required))}}function H(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(n.errors.requiredField)}}function K(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(n.errors.onlyLetters)}}function G(t,i){if(1&t&&(e.TgZ(0,"div",26)(1,"div",27),e._UZ(2,"img",28),e.qZA(),e._UZ(3,"aem-lot-text",22),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("src","assets/img/circle-exclamation.svg",e.LSH),e.xp6(1),e.Q6J("richText",!0)("text",n.footnote)}}function z(t,i){if(1&t&&(e.TgZ(0,"div",26)(1,"div",27),e._UZ(2,"img",28),e.qZA(),e._UZ(3,"aem-lot-text",22),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("src","assets/img/circle-exclamation.svg",e.LSH),e.xp6(1),e.Q6J("richText",!0)("text",n.footnote)}}const D=function(t,i){return{bookingReference:t,ticketNumber:i}},V=function(t){return{"check-in__button--outside-of-booker":t}},j={label:"Check in",isEmpty:()=>!1},g={bookingReference:{validators:[l.kI.required,l.kI.pattern(a.Sfs.ONLY_ALPHANUMERIC),l.kI.minLength(6),l.kI.maxLength(6)]},ticketNumber:{validators:[l.kI.required,function C(t){const i=t.value.replace("-","");return i.match(/[^0-9]/)?{onlyDigits:!0}:i.length<13?{tooShort:!0}:i.length>13?{tooLong:!0}:t.value.match(/^[0-9]{3}-?[0-9]{10}$/)?null:{invalidFormat:!0}}]}};let W=(()=>{class t{constructor(n,r,o,s,m,h){this.document=n,this.formBuilder=r,this.CINService=o,this.device=s,this.platform=m,this.liveAnounceHelperService=h,this.Color=a.Ilk,this.Size=a.$uz,this.fieldName="bookingReference",this.switchableFormControls={bookingReference:new l.NI("",g.bookingReference),ticketNumber:new l.NI("",g.ticketNumber)},this.CINForm=this.formBuilder.group({bookingReference:["",g[this.fieldName]],lastName:["",{validators:[l.kI.required,l.kI.pattern(a.Sfs.ONLY_LETTERS)]}]})}ngOnInit(){this.restoreFormFromSessionStorage()}ngOnDestroy(){this.liveAnounceHelperService.announceIntervalStop(this.submitAnouncer)}searchByChange(n){n!==this.fieldName&&(this.switchableFormControls[this.fieldName]=this.CINForm.get(this.fieldName)||new l.NI("",g[this.fieldName]),this.CINForm.removeControl(this.fieldName),this.fieldName=n,this.CINForm.registerControl(n,this.switchableFormControls[this.fieldName]))}setSessionStorageItems(){sessionStorage.removeItem(a.cf6.SS_CHECK_IN_KEY);const{bookingReference:n,lastName:r,ticketNumber:o}=this.CINForm.value;sessionStorage.setItem(a.cf6.SS_CHECK_IN_KEY,JSON.stringify({searchBy:this.fieldName,bookingReference:n,lastName:r,ticketNumber:o}))}restoreFormFromSessionStorage(){if(this.platform.isBrowser){const n=sessionStorage.getItem(a.cf6.SS_CHECK_IN_KEY);if(!n)return;const{searchBy:r,bookingReference:o,lastName:s,ticketNumber:m}=JSON.parse(n);this.searchByChange(r),this.CINForm.get("bookingReference")?.setValue(o||""),this.CINForm.get("lastName")?.setValue(s||""),this.CINForm.get("ticketNumber")?.setValue(m||"")}}onSubmit(){this.submitAnouncer=this.liveAnounceHelperService.announceIntervalStart("Loading",3e3),this.CINForm.valid&&this.CINService.makeRequest(this.CINForm.value).subscribe(n=>{this.liveAnounceHelperService.announceIntervalStop(this.submitAnouncer),n.url?"_self"===(this.setSessionStorageItems(),this.link.target)?this.document.location.href=n.url:window.open(n.url,"_blank")?.focus():this.document.location.reload()},n=>{this.liveAnounceHelperService.announceIntervalStop(this.submitAnouncer),n.error.url?this.document.location.href=n.error.url:this.document.location.reload()})}static#e=this.\u0275fac=function(r){return new(r||t)(e.Y36(p.K0),e.Y36(l.qu),e.Y36(N),e.Y36(a.U8N),e.Y36(a.mix),e.Y36(I))};static#n=this.\u0275cmp=e.Xpm({type:t,selectors:[["lot-check-in"]],inputs:{header:"header",dropdown:"dropdown",bookingReference:"bookingReference",ticketNumber:"ticketNumber",lastName:"lastName",link:"link",errors:"errors",componentInBooker:"componentInBooker",footnote:"footnote"},decls:35,vars:42,consts:[[1,"check-in__header"],["id","check-in",1,"cdk-visually-hidden"],[3,"headingTag","headingClass","label",4,"ngIf"],["class","check-in__richtext-container check-in__richtext-container--top",4,"ngIf"],[1,"check-in__type-switch"],[1,"check-in__select",3,"label","ngModel","showClearButton","applyShadow","ngModelChange"],["value","bookingReference"],["value","ticketNumber"],[3,"label","ngModel","items","ngModelChange"],["desktopCheckInType",""],["lotFocusInvalidControl","",1,"check-in__form",3,"formGroup","ngSubmit"],["class","check-in__form-field no-margin",3,"ngClass",4,"ngIf"],["class","check-in__form-field",3,"ngClass",4,"ngIf"],[1,"check-in__form-field",3,"ngClass"],["formControlName","lastName","lotTrimControlSpaces","","spellcheck","false","autocomplete","family-name","matInput","","required","",3,"placeholder"],[4,"ngIf"],["class","check-in__richtext-container check-in__richtext-container--bottom",4,"ngIf"],["mat-raised-button","","cdkMonitorElementFocus","","type","submit",1,"check-in__button","mat-primary-accent",3,"ngClass"],[1,"cdk-visually-hidden"],["aria-hidden","true",1,"cdk-visually-hidden"],[3,"headingTag","headingClass","label"],[1,"check-in__richtext-container","check-in__richtext-container--top"],[1,"component--small-margin-bottom",3,"richText","text"],[1,"check-in__form-field","no-margin",3,"ngClass"],["formControlName","bookingReference","lotTrimControlSpaces","","maxlength","6","spellcheck","false","matInput","","required","",3,"placeholder"],["formControlName","ticketNumber","lotTrimControlSpaces","","maxlength","14","spellcheck","false","matInput","","required","",3,"placeholder"],[1,"check-in__richtext-container","check-in__richtext-container--bottom"],[1,"check-in__info-icon-wrapper"],["alt","",1,"check-in__info-icon",3,"src"]],template:function(r,o){if(1&r){const s=e.EpF();e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,A,1,3,"lot-title",2),e.YNc(5,q,2,2,"div",3),e.qZA(),e.TgZ(6,"div",4)(7,"lot-dropdown",5),e.NdJ("ngModelChange",function(h){return o.searchByChange(h)}),e.ALo(8,"translate"),e.TgZ(9,"lot-option",6),e._uU(10),e.qZA(),e.TgZ(11,"lot-option",7),e._uU(12),e.qZA()(),e.TgZ(13,"lot-type-navigation",8,9),e.NdJ("ngModelChange",function(){e.CHM(s);const h=e.MAs(14);return e.KtG(o.searchByChange(h.value))}),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"form",10),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.YNc(17,R,8,9,"mat-form-field",11),e.YNc(18,E,9,10,"mat-form-field",12),e.TgZ(19,"mat-form-field",13),e._UZ(20,"input",14),e.TgZ(21,"mat-label"),e._uU(22),e.qZA(),e.TgZ(23,"mat-error"),e.YNc(24,H,3,1,"ng-container",15),e.YNc(25,K,3,1,"ng-container",15),e.qZA()(),e.YNc(26,G,4,3,"div",16),e.TgZ(27,"button",17),e._uU(28),e.TgZ(29,"span",18),e._uU(30),e.qZA()(),e.YNc(31,z,4,3,"div",16),e.TgZ(32,"span",19),e._uU(33),e.ALo(34,"translate"),e.qZA()()}2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,26,"Check in")," "),e.xp6(2),e.Q6J("ngIf",o.header&&o.header.text&&!o.componentInBooker),e.xp6(1),e.Q6J("ngIf",o.header&&o.header.description),e.xp6(2),e.Q6J("label",e.lcZ(8,28,"Search by"))("ngModel",o.fieldName)("showClearButton",!1)("applyShadow",!0),e.xp6(3),e.Oqu(o.dropdown.bookingReferenceText),e.xp6(2),e.Oqu(o.dropdown.ticketNumberText),e.xp6(1),e.Q6J("label",e.lcZ(15,30,"Search by"))("ngModel",o.fieldName)("items",e.WLB(34,D,o.dropdown.bookingReferenceText,o.dropdown.ticketNumberText)),e.xp6(3),e.Q6J("formGroup",o.CINForm),e.xp6(1),e.Q6J("ngIf","bookingReference"===o.fieldName),e.xp6(1),e.Q6J("ngIf","ticketNumber"===o.fieldName),e.xp6(1),e.Q6J("ngClass",e.WLB(37,f,!o.componentInBooker,o.componentInBooker)),e.xp6(1),e.Q6J("placeholder",o.lastName.placeholder),e.xp6(2),e.Oqu(o.lastName.label),e.xp6(2),e.Q6J("ngIf",null==o.CINForm.controls.lastName.errors?null:o.CINForm.controls.lastName.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.CINForm.controls.lastName.errors?null:o.CINForm.controls.lastName.errors.pattern),e.xp6(1),e.Q6J("ngIf",o.footnote&&!o.device.isDesktop()||o.device.isDesktop()&&!o.componentInBooker),e.xp6(1),e.Q6J("ngClass",e.VKq(40,V,!o.componentInBooker)),e.xp6(1),e.hij(" ",o.link.label," "),e.xp6(2),e.Oqu(o.link.screenReaderDescription),e.xp6(1),e.Q6J("ngIf",o.footnote&&o.device.isDesktop()&&o.componentInBooker),e.xp6(2),e.Oqu(e.lcZ(34,32,"* required fields")))},dependencies:[p.mk,p.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.nD,l.On,l.sg,l.u,b.lW,u.KE,u.hX,u.TO,v.Nt,_.kH,T.u,Z.u,F.k,O.X,y.J,w.x,S.T,M.r,k.X$],styles:["[_nghost-%COMP%]{display:block;padding-top:36px;padding-bottom:21px;margin-left:calc(var(--grid-gutter-width) / 2);margin-right:calc(var(--grid-gutter-width) / 2)}@media (min-width: 1024px){[_nghost-%COMP%]{padding-bottom:0}}.check-in__header[_ngcontent-%COMP%]   lot-title[_ngcontent-%COMP%]{margin-left:0}.check-in__type-switch[_ngcontent-%COMP%]   lot-type-navigation[_ngcontent-%COMP%]{display:none}.check-in__type-switch[_ngcontent-%COMP%]   lot-dropdown[_ngcontent-%COMP%]{margin-bottom:12px}@media (min-width: 834px){.check-in__type-switch[_ngcontent-%COMP%]   lot-dropdown[_ngcontent-%COMP%]{display:none}.check-in__type-switch[_ngcontent-%COMP%]   lot-type-navigation[_ngcontent-%COMP%]{display:block}}.check-in__richtext-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start}.check-in__richtext-container--top[_ngcontent-%COMP%]   aem-lot-text[_ngcontent-%COMP%]{font-size:16px;margin-left:0!important;margin-right:0!important}@media (min-width: 834px){.check-in__richtext-container--top[_ngcontent-%COMP%]   aem-lot-text[_ngcontent-%COMP%]{margin-bottom:5px}}.check-in__richtext-container--bottom[_ngcontent-%COMP%]{margin-top:1.5rem!important}.check-in__richtext-container--bottom[_ngcontent-%COMP%]   aem-lot-text[_ngcontent-%COMP%]{font-size:12px;line-height:18px;margin-bottom:1.25rem}.check-in__info-icon-wrapper[_ngcontent-%COMP%]{line-height:18px}.check-in__info-icon-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:13px;min-width:13px;height:13px;vertical-align:initial;margin-top:1px}@-moz-document url-prefix(){.check-in__info-icon-wrapper img{margin-top:2.5px!important}}.check-in__form[_ngcontent-%COMP%]{display:inline-flex;flex-wrap:wrap;margin:-12px 0 0 -12px;width:calc(100% + 12px);align-items:flex-start;justify-content:flex-end}.check-in__form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:12px 0 0 12px}.check-in__form-field[_ngcontent-%COMP%]{flex-grow:1;min-width:250px}.check-in__form-field.mat-form-field-invalid[_ngcontent-%COMP%]{margin-bottom:1.25rem}@media (min-width: 1024px){.check-in__form-field.mat-form-field-invalid[_ngcontent-%COMP%]{margin-bottom:1.625rem}}.check-in__form-field--outside-of-booker[_ngcontent-%COMP%]{width:100%!important}.check-in__button[_ngcontent-%COMP%]{min-width:112px;height:60px;font: 400 18px/18px LotGeomanist,LotLato,Helvetica,Arial,sans-serif}@media (max-width: 1023.98px){.check-in__button[_ngcontent-%COMP%]{flex-grow:1}}@media (min-width: 768px){.check-in__button[_ngcontent-%COMP%]{border:none;height:60px}}.check-in__button--outside-of-booker[_ngcontent-%COMP%]{font: 400 18px/18px LotGeomanist,LotLato,Helvetica,Arial,sans-serif}@media (min-width: 1024px){.check-in__button--outside-of-booker[_ngcontent-%COMP%]{font: 400 12px/12px LotGeomanist,LotLato,Helvetica,Arial,sans-serif;height:39px!important;margin-bottom:40px!important}}"]})}return t})()}}]);